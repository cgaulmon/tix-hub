<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
<meta charset="ISO-8859-1">
<title>TixHub Event Portal</title>
<link rel="stylesheet"
	th:href="@{/css/bootstrap/flatly/bootstrap.min.css}" />
<script type="text/javascript"
	th:src="@{/js/jquery/jquery-3.5.1.min.js}"></script>
<script type="text/javascript"
	th:src="@{/js/bootstrap/bootstrap.min.js}"></script>
<script type="text/javascript"
	th:src="@{/js/jquery-validation/jquery.validate.min.js}"></script>
<script>

$.validator.setDefaults({
	submitHandler: function(form) {
		form.submit();
	}
});

	$(document).ready(function() {
		$("#invalidCredAlertCloseBtn").click(function() {
			$("#invalidCredentialsAlert").removeClass('show');
		});

		$("#loginBtn").click(function() {
			$("#invalidCredentialsAlert").addClass('show');
			window.location.replace("/");
		});
		
		$("#rsvpForm").validate({
			rules: {
				numOfTickets: "required",
				name: "required",
				email: {required: true, email: true}
				
			},
			messages: {
				numOfTickets: "Enter a number",
				name: "Please enter a name",
				email: "Please enter your valid email"
			}
		});
	});
</script>
<style>
.event_image {
    width: 100%;
    padding-bottom: 56.25%;
    background-size: cover;
    margin-bottom: .5em;
}

.page-title {
    padding-top: .5em;
    padding-bottom: 0.5em;
    border-bottom: 1px solid #2c3e50;
}

form .error {
  color: #ff0000;
}
</style>

</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
		<a class="navbar-brand" href="/">TixHub</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse"
			data-target="#navbarColor01" aria-controls="navbarColor01"
			aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarColor01">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item active"><a class="nav-link" href="/">Home
						<span class="sr-only">(current)</span>
				</a></li>
				<li class="nav-item"><a class="nav-link" href="/events">Events</a>
				</li>
			</ul>
			<ul class="nav navbar-nav navbar-right">
				<li><a href="/user/login"><span class="glyphicon glyphicon-log-in"></span>
						Login</a></li>
			</ul>
		</div>
	</nav>
	<section id="greeting" class="container py-2">
		<h2 class="page-title text-primary">Event Details</h2>
		
	</section>

	<section class="container py-2">

		<div class="row">
			<div class="col-md-12">
				<div class="card">
					<div class="card-body">
					<div class="row">
						<div class="col-md-2">
						</div>
						<div class="col-md-10">
						<h3 class="card-title" th:text="${event.name}"></h3>
						<section id="event_short_description">
						<p class="card-text" th:text="${event.shortDescription}"></p>
							
						<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">RSVP</button>
						</section>
						
						<section class="py-2">
						<strong>Event Date: <span th:text="${#dates.format(#dates.createNow(), 'MMMM dd, yyyy hh:mm:a')}"></span></strong>
						</section>
						<section id="event_long_description">
						<p th:text="${event.longDescription}"></p>
						</section>
						</div>
					</div>
						
					</div>
				</div>
				
			</div>
		</div>
	</section>

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title"><span th:text="${event.name}"></span>: RSVP</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true" class="text-white">&times;</span>
        </button>
      </div>
      <form name="rsvpForm" id="rsvpForm" method="post" novalidate="novalidate">
      <div class="modal-body">
        <div class="form-group">
			<label for="name" id="nameLabel" name="nameLabel">Name: </label> 
			<input id="name" name="name" class="form-control form-control-lg" type="text" required="required"/>
		</div>
		<div class="form-group">
			<label for="numOfTickets" id="numOfTicketsLabel" name="numOfTicketsLabel"># of Tickets: </label> 
			<input id="numOfTickets" name="numOfTickets" class="form-control form-control-lg" type="number" required="required" size="4" maxlength="4" />
		</div>
		<div class="form-group">
			<label for="email" id="emailLabel" name="emailLabel">Email Address: </label> 
			<input id="email" name="email" class="form-control form-control-lg" type="email" required="required"/>
		</div>
      </div>
      <div class="modal-footer">
        <input id="rsvpBtn" type="submit" value="RSVP" class="btn btn-primary"/>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
      </form>
    </div> 
  </div>
</div>

</body>
</html>